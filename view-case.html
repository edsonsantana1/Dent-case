<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Visualizar Caso - Sistema Odonto-Legal</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="icon" sizes="192x192" href="imag/192.png">
  <link rel="icon" sizes="512x512" href="imag/512.png">
  <!-- Meta tags adicionais para melhorar SEO e acessibilidade -->
  <meta name="description" content="Visualização detalhada de caso odonto-legal">
  <meta name="theme-color" content="#ffffff">
</head>
<body>
  <button class="menu-toggle" id="menu-toggle" aria-label="Abrir/Fechar menu">
    <i class="fas fa-bars"></i>
  </button>
  
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo-placeholder">
        <img src="imag/logo2.png" alt="Logo do Sistema Odonto-Legal" class="logo" loading="lazy"/>
      </div>
    </div>
    <nav class="sidebar-nav">
      <a href="dashboard.html"><span class="material-symbols-outlined">bar_chart</span> Dashboard</a>
      <a href="list-case.html" class="active"><span class="material-symbols-outlined">folder</span> Casos</a>
      <a href="usuarios.html"><span class="material-symbols-outlined">group</span> Gerenciamento de Usuários</a>
      <a href="index.html"><span class="material-symbols-outlined">logout</span> Sair</a>
    </nav>
  </aside>

  <div class="main-content">
    <nav class="main-nav">
      <h1>Detalhes do Caso</h1>
      <div class="user-info">
        <!-- Espaço para informações do usuário logado -->
      </div>
    </nav>

    <div class="container">
      <!-- Cabeçalho do Caso -->
      <div class="case-header">
        <h1 id="case-title">Carregando...</h1>
        <div class="case-meta">
          <span class="case-id" id="case-id">#---</span>
          <span class="case-status" id="case-status">Carregando...</span>
        </div>

        <div class="case-details">
          <section aria-labelledby="case-info-heading">
            <h3 id="case-info-heading">Informações do Caso</h3>
            <div class="info-grid">
              <p><strong>Descrição:</strong> <span id="case-description">Carregando...</span></p>
              <p><strong>Data de Criação:</strong> <span id="case-date">--/--/----</span></p>
              <p><strong>Responsável:</strong> <span id="case-expert">Carregando...</span></p>
            </div>
          </section>

          <section aria-labelledby="patient-info-heading">
            <h3 id="patient-info-heading">Informações do Paciente</h3>
            <div class="info-grid">
              <p><strong>Nome:</strong> <span id="patient-name">Não informado</span></p>
              <p><strong>Data de Nascimento:</strong> <span id="patient-dob">Não informado</span></p>
              <p><strong>Gênero:</strong> <span id="patient-gender">Não informado</span></p>
              <p><strong>Documento:</strong> <span id="patient-id">Não informado</span></p>
              <p><strong>Contato:</strong> <span id="patient-contact">Não informado</span></p>
            </div>
          </section>

          <section aria-labelledby="incident-info-heading">
            <h3 id="incident-info-heading">Informações do Incidente</h3>
            <div class="info-grid">
              <p><strong>Data:</strong> <span id="incident-date">Não informado</span></p>
              <p><strong>Local:</strong> <span id="incident-location">Não informado</span></p>
              <p><strong>Descrição:</strong> <span id="incident-description">Não informado</span></p>
              <p><strong>Instrumento/Arma:</strong> <span id="incident-weapon">Não informado</span></p>
            </div>
          </section>
        </div>

        <!-- Seção de Mídias -->
        <div class="media-section" id="case-media-container">
          <h3>Mídias do Caso</h3>
          <div class="media-placeholder">
            <p>Carregando mídias...</p>
          </div>
        </div>

        <div class="case-actions">
          <button id="edit-case" class="btn btn-edit"><i class="fas fa-edit"></i> Editar</button>
          <button id="delete-case" class="btn btn-delete"><i class="fas fa-trash"></i> Excluir</button>
          <button id="change-status" class="btn btn-status"><i class="fas fa-exchange-alt"></i> Alterar Status</button>
          <button id="generate-report" class="btn btn-report"><i class="fas fa-file-pdf"></i> Gerar Relatório</button>
        </div>
      </div>

      <!-- Seção de Evidências -->
      <div class="evidence-section">
        <div class="section-header">
          <h2><i class="fas fa-microscope"></i> Evidências</h2>
          <button id="add-evidence" class="btn btn-primary"><i class="fas fa-plus"></i> Adicionar Evidência</button>
        </div>

        <div class="evidence-list" id="evidence-list">
          <div class="empty-evidence-message" id="empty-evidence-message">
            <h3>Nenhuma evidência cadastrada</h3>
            <p>Clique no botão "Adicionar" para registrar uma nova evidência</p>
          </div>
        </div>
      </div>

      <!-- Modal Adicionar Evidência -->
      <div id="evidence-modal" class="modal" role="dialog" aria-labelledby="evidence-modal-title" aria-hidden="true">
        <div class="modal-content">
          <span class="close" aria-label="Fechar modal">&times;</span>
          <h2 id="evidence-modal-title">Adicionar Nova Evidência</h2>
          <form id="evidence-form">
            <div class="form-row">
              <div class="form-group">
                <label for="collection-date">Data da coleta:</label>
                <input type="date" id="collection-date" required aria-required="true">
              </div>
              <div class="form-group">
                <label for="collection-time">Hora:</label>
                <input type="time" id="collection-time" required aria-required="true">
              </div>
            </div>

            <div class="form-group">
              <label for="evidence-description-field">Descrição:</label>
              <textarea id="evidence-description-field" required aria-required="true"></textarea>
            </div>

            <div class="form-group">
              <label for="evidence-location">Localização:</label>
              <div class="location-fields">
                <input type="text" id="evidence-lat" placeholder="Latitude" class="location-input" aria-label="Latitude">
                <input type="text" id="evidence-long" placeholder="Longitude" class="location-input" aria-label="Longitude">
                <button type="button" id="get-location" class="btn btn-location" aria-label="Usar minha localização atual">
                  <i class="fas fa-map-marker-alt"></i> Usar Minha Localização
                </button>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="evidence-image-url">Imagem (URL):</label>
                <input type="url" id="evidence-image-url" placeholder="Opcional" aria-label="URL da imagem">
              </div>
              <div class="form-group">
                <label for="evidence-file">Arquivo:</label>
                <input type="file" id="evidence-file" accept="image/*,.pdf,.doc,.docx" aria-label="Selecionar arquivo">
              </div>
            </div>

            <button type="submit" class="btn btn-submit">Salvar Evidência</button>
          </form>
        </div>
      </div>

      <!-- Modal Gerar Relatório -->
      <div id="report-modal" class="modal" role="dialog" aria-labelledby="report-modal-title" aria-hidden="true">
        <div class="modal-content">
          <span class="close" aria-label="Fechar modal">&times;</span>
          <h2 id="report-modal-title">Gerar Relatório do Caso</h2>
          <form id="report-form">
            <div class="form-group">
              <label for="report-title">Título do Relatório:</label>
              <input type="text" id="report-title" required aria-required="true">
            </div>

            <div class="form-group">
              <label for="report-notes">Observações Adicionais:</label>
              <textarea id="report-notes" rows="4" aria-label="Observações adicionais para o relatório"></textarea>
            </div>

            <div class="form-group">
              <label for="report-template">Modelo de Relatório:</label>
              <select id="report-template" aria-label="Selecione um modelo de relatório">
                <option value="default">Padrão</option>
                <option value="detailed">Detalhado</option>
                <option value="summary">Resumido</option>
              </select>
            </div>

            <button type="submit" class="btn btn-submit">Gerar Relatório PDF</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Confirmação -->
  <div id="confirmation-modal" class="modal" role="dialog" aria-labelledby="confirmation-modal-title" aria-hidden="true">
    <div class="modal-content">
      <span class="close-modal" aria-label="Fechar modal">&times;</span>
      <h3 id="confirmation-modal-title">Confirmação</h3>
      <p id="confirmation-message">Tem certeza que deseja realizar esta ação?</p>
      <div class="modal-actions">
        <button id="modal-cancel" class="btn btn-secondary">Cancelar</button>
        <button id="modal-confirm" class="btn btn-danger">Confirmar</button>
      </div>
    </div>
  </div>

  <!-- Loading overlay -->
  <div id="loading-overlay" class="loading-overlay" style="display: none;">
    <div class="loading-content">
      <i class="fas fa-spinner fa-spin fa-3x"></i>
      <p id="loading-message">Processando...</p>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="js/view-case.js"></script>
</body>
</html>